@inherits Umbraco.Web.Mvc.UmbracoTemplatePage<ContentModels.Entry>
@using ContentModels = Umbraco.Web.PublishedContentModels;
@using System.Configuration;
@{
    Layout = "Master.cshtml";
    var entry = Model.Content;
}

@section Head {
    <link rel="stylesheet" type="text/css" href="~/assets/css/bootstrap-datepicker3.min.css">
}

@{ Html.RenderPartial("~/Views/Partials/PageHeader.cshtml");}

<!-- Main content Start -->
<div class="entry-main-content">
    <section id="entry">
        <div class="container">
            <div class="row match-my-cols">
                <div class="col-md-8 col-sm-7 entry-left-col">
                    <div id="entry-container">
                        <div class="title-header">
                            <h3 class="title-medium">Enter the Mid Sussex Triathlon on Sunday 9th June 2019</h3>
                        </div>
                        <div>
                            <form role="form" id="entryForm" data-toggle="validator" class="entry-form">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5 class="title-medium pull-left">Your details</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">First name*</label>
                                            <input type="text" class="input" id="firstName" required data-error="Please enter first name" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Last name*</label>
                                            <input type="text" class="input" id="lastName" required data-error="Please enter last name" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Date of birth*</label>
                                            <input type="text" class="input" id="dob" required data-error="Please enter date of birth" data-date-format="dd/mm/yyyy">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Gender*</label>
                                            <select class="input" id="gender" name="gender" required data-error="Please select gender">
                                                <option value=""></option>
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                            </select>
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Phone number</label>
                                            <input type="text" class="input" id="phone" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Email*</label>
                                            <input type="email" class="input" id="email" required data-error="Please enter email address in correct format" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5 class="title-medium pull-left">Contact information</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Address line 1*</label>
                                            <input type="text" class="input" id="address1" required data-error="Please enter address line 1" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Address line 2</label>
                                            <input type="text" class="input" id="address2" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Town / City*</label>
                                            <input type="text" class="input" id="city" required data-error="Please enter town / city" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">County</label>
                                            <input type="text" class="input" id="county">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Postcode*</label>
                                            <input type="text" class="input" id="postcode" required data-error="Please enter postcode" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5 class="title-medium pull-left">Event details</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line label-line-radio">
                                            <span class="span"></span>
                                            <label class="label transition">Race type*</label>
                                            <label class="radio-inline">
                                                <input type="radio" name="raceType" id="raceType1" value="Full Triathlon" required> Full Triathlon
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" name="raceType" id="raceType2" value="Aquabike" required> Aquabike
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" name="raceType" id="raceType3" value="RelayTriathlon" required> Relay Triathlon
                                            </label>
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-line label-line-time">
                                            <span class="span"></span>
                                            <label class="label transition">Swim time* (4-20 minutes)</label>
                                            <input type="time" class="input" id="swimTime" min="04:00" max="20:00" required data-error="Please enter a swim time between 4 and 20 minutes">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">BTF Number (required for BTF discount)</label>
                                            <input type="text" class="input" id="btfNumber" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Club name</label>
                                            <input type="text" class="input" id="clubName" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group label-line label-line-radio">
                                            <span class="span"></span>
                                            <label class="label transition">Are you new to the sport?</label>
                                            <label class="radio-inline">
                                                <input type="radio" name="newToSport" id="newToSport1" value="Yes"> Yes
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" name="newToSport" id="newToSport2" value="No"> No
                                            </label>
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-line">
                                            <span class="span"></span>
                                            <label class="label transition">Where did you hear about us?</label>
                                            <input type="text" class="input" id="howHeardAboutUs" maxlength="255">
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                                <div id="relayFieldsContainer"></div>   
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5 class="title-medium pull-left">Credit or debit card</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">

                                        <div id="card-element">
                                            <!-- A Stripe Element will be inserted here. -->
                                        </div>

                                        <!-- Used to display Element errors. -->
                                        <div id="card-errors" role="alert" class="payment-errors"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group checkbox-field">
                                            @if (entry.TermsPage != null)
                                            {
                                                <a href="@entry.TermsPage.Url" target="_blank">Terms and Conditions</a>
                                            }
                                            <div class="checkbox">
                                                <label>
                                                    <input id="terms" type="checkbox" value="true" required> I have read and agree to the race terms and conditions.*
                                                </label>
                                            </div>
                                            <div class="help-block with-errors"></div>
                                        </div>
                                        <p>
                                            Confidentiality is important to us. The personal information you provide will remain confidential
                                            and will not be sold or distributed beyond our control. Your payment details are securely sent directly to our PCI compliant payment provider.
                                        </p>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="buttons">
                                            <button type="submit" id="form-submit" class="btn btn-common">
                                                Complete entry at £<span id="cost"></span>
                                            </button>
                                            <div id="msgSubmit" class="h3 text-center hidden"></div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div id="entry-confirmed" class="hidden">
                        <div class="title-header">
                            <h3 class="title-medium">Mid Sussex Triathlon entry complete</h3>
                        </div>
                        <div>
                            <form class="entry-form">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5 class="title-medium pull-left">You have entered the Mid Sussex Triathlon!</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        @entry.EntryConfirmedText
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div id="entry-error" class="hidden">
                        <div class="title-header">
                            <h3 class="title-medium">Entry not complete</h3>
                        </div>
                        <div>
                            <form class="entry-form">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5 class="title-medium pull-left">Sorry, there has been a problem processing your order</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        Please <a href="/contact">get in touch</a> with us to let us know, providing your full name and we will investigate the problem.
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-5 information">

                    <div class="info-container">
                        <div class="icon">
                            <i class="icon-hourglass"></i>
                        </div>
                        <div class="info">
                            <h5>Places left</h5>
                            <h3 id="placesLeft"></h3>
                        </div>
                    </div>

                    <div class="info-container">
                        <div class="icon">
                            <i class="fa fa-users"></i>
                        </div>
                        <div class="info">
                            <h5>BTF Members</h5>
                            <h3>£<span id="btfCost">@Umbraco.Field("bTFCost")</span></h3>
                        </div>
                    </div>

                    <div class="info-container">
                        <div class="icon">
                            <i class="fa fa-user"></i>
                        </div>
                        <div class="info">
                            <h5>Non BTF Members</h5>
                            <h3>£<span id="nonBtfCost">@Umbraco.Field("nonBTFCost")</span></h3>
                        </div>
                    </div>
                    <div class="info-container">
                        <div class="icon">
                            <i class="fa fa-envelope"></i>
                        </div>
                        <div class="info">
                            <h5>Impairments / Special request</h5>
                            @entry.ImpairmentsText
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>
</div>
<!-- Main content End -->

@section Foot {
    <script type="text/javascript" src="~/assets/js/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="~/assets/js/form-validator.min.js"></script>
    <script type="text/javascript" src="~/assets/js/jquery-loader.js"></script>
    <script type="text/javascript" src="~/assets/js/entry.js"></script>

    <script type="text/javascript">
        var pkStripe = '@ConfigurationManager.AppSettings["stripePublicKey"]';

        $(document).ready(function () {
            initStripe(pkStripe);
        });
    </script>

    <script id="relayFields" type="template">
        <div class="row">
            <div class="col-md-12">
                <h5 class="title-medium pull-left">Relay details</h5>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group label-line">
                    <span class="span"></span>
                    <label class="label transition">Relay entrant 1 First name*</label>
                    <input type="text" class="input" id="relay1FirstName" required data-error="Please enter first name" maxlength="255">
                    <div class="help-block with-errors"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group label-line">
                    <span class="span"></span>
                    <label class="label transition">Second entrant 1 Last name*</label>
                    <input type="text" class="input" id="relay1LastName" required data-error="Please enter last name" maxlength="255">
                    <div class="help-block with-errors"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group label-line">
                    <span class="span"></span>
                    <label class="label transition">Relay entrant 1 BTF number</label>
                    <input type="text" class="input" id="relay1BtfNumber" maxlength="255">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group label-line">
                    <span class="span"></span>
                    <label class="label transition">Relay entrant 2 First name</label>
                    <input type="text" class="input" id="relay2FirstName" data-error="Please enter first name" maxlength="255">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group label-line">
                    <span class="span"></span>
                    <label class="label transition">Second entrant 2 Last name</label>
                    <input type="text" class="input" id="relay2LastName" data-error="Please enter last name" maxlength="255">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group label-line">
                    <span class="span"></span>
                    <label class="label transition">Relay entrant 2 BTF number</label>
                    <input type="text" class="input" id="relay2BtfNumber" maxlength="255">
                </div>
            </div>
        </div>
    </script>
}


